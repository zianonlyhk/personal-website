/* ************************************************************************** */
/*                                                                            */
/*                                                                            */
/*   globals.css                                                              */
/*                                                                            */
/*   By: Zian Huang <zianhuang00@gmail.com>                                   */
/*                                                                            */
/*   Created: 2025/02/17 21:46:56 by Zian Huang                               */
/*   Updated: 2025/03/11 15:31:24 by Zian Huang                               */
/*                                                                            */
/* ************************************************************************** */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------------------------------------------------------------------------------------------- */
/* Start of the _theme_variables_ CSS section ---------------------------------------------------- */

/* Light theme variables */
:root {
    /* Base colors */
    --background: #ffffff;
    --foreground: #0f172a;

    /* Component colors */
    --card: #f8fafc;
    --card-foreground: #0f172a;
    --popover: #ffffff;
    --popover-foreground: #1a1a2e;

    /* Accent colors */
    --primary: #60a5fa;
    --primary-foreground: #ffffff;
    --accent: #a78bfa;
    --accent-foreground: #ffffff;

    /* UI colors */
    --muted: #f1f5f9;
    --muted-foreground: #64748b;
    --border: #e2e8f0;

    /* SVG filter for homeicon.svg */
    --svg-filter: invert(0%) sepia(0%) saturate(0%) hue-rotate(0deg) brightness(100%) contrast(100%);
}

/* Dark theme variables */
.dark {
    /* Base colors */
    --background: #0f172a;
    --foreground: #f8fafc;

    /* Component colors */
    --card: #1e293b;
    --card-foreground: #f8fafc;
    --popover: #1e293b;
    --popover-foreground: #e2e8f0;

    /* Accent colors */
    --primary: #60a5fa;
    --primary-foreground: #ffffff;
    --accent: #a78bfa;
    --accent-foreground: #ffffff;

    /* UI colors */
    --muted: #2d3748;
    --muted-foreground: #94a3b8;
    --border: #334155;

    /* SVG filter for homeicon.svg */
    --svg-filter: invert(100%) sepia(0%) saturate(0%) hue-rotate(0deg) brightness(100%) contrast(100%);
}

/* End of the _theme_variables_ CSS section ------------------------------------------------------ */
/* ---------------------------------------------------------------------------------------------- */

@layer base {
    body {
        @apply bg-background text-foreground;
        /* the body part of my website uses the font of Roboto */
        font-family: var(--font-roboto);
    }

    /* Force scrollbar to always show to prevent layout shift */
    /* This is to prevent the layout shift when the scrollbar is hidden */
    html {
        overflow-y: scroll;
    }
}

@layer components {
    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _text_ CSS section -------------------------------------------------------------- */

    .text-roboto-mono {
        font-family: var(--font-roboto-mono);
    }

    /* Elegant home icon animation */
    .home-icon {
        transition: transform 0.5s ease-in-out;
    }

    .home-icon:hover {
        transform: scale(1.05);
    }

    .title-boss {
        @apply font-bold text-3xl md:text-5xl mt-5 mb-5 md:mt-10 md:mb-10 max-w-3xl md:max-w-5xl;
        font-family: var(--font-roboto-mono);
        text-align: right;
    }

    .title-large {
        @apply text-2xl md:text-4xl font-bold mt-3 md:mt-4 mb-3 md:mb-4;
    }

    .title-medium {
        @apply text-xl md:text-3xl font-semibold mt-2 md:mt-3 mb-2 md:mb-3;
    }

    .title-small {
        @apply text-lg md:text-2xl font-semibold mt-0 md:mt-1 mb-0 md:mb-1;
        line-height: 1.2;
    }

    .body-large {
        @apply text-lg md:text-xl mb-2 md:mb-4;
    }

    .body-medium {
        @apply text-base md:text-lg mb-1 md:mb-2;
    }

    .body-small {
        @apply text-sm md:text-base mb-0 md:mb-1;
        line-height: 1.2;
    }

    .unordered-list {
        @apply list-disc ml-6 my-2 md:my-4;
    }

    .ordered-list {
        @apply list-decimal ml-6 my-2 md:my-4;
    }

    /* End of the _text_ CSS section ---------------------------------------------------------------- */
    /* ---------------------------------------------------------------------------------------------- */

    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _media_ CSS section ------------------------------------------------------------- */

    .image-container {
        @apply relative w-full;
    }

    .image {
        @apply rounded-lg object-contain;
    }

    .modal {
        @apply fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50;
    }

    .modal-content {
        @apply bg-card rounded-lg p-4 relative;
    }

    /* End of the _media_ CSS section --------------------------------------------------------------- */
    /* ---------------------------------------------------------------------------------------------- */

    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _home_ CSS section ------------------------------------------------------------- */

    .home-text {
        @apply text-foreground font-mono text-sm sm:text-base md:text-lg tracking-wide;
    }

    .home-text-container {
        @apply flex gap-2 items-start mt-4;
    }

    /* End of the _home_ CSS section ------------------------------------------------------------- */
    /* ---------------------------------------------------------------------------------------------- */

    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _content_ CSS section ----------------------------------------------------------- */

    .preview_link {
        @apply text-primary hover:underline transition-all duration-200 inline-flex items-center;
        position: relative;
    }

    .preview_link::after {
        @apply ml-1 opacity-0 -translate-x-2 transition-all duration-200;
    }

    .preview_link:hover::after {
        @apply opacity-100 translate-x-0;
    }

    .preview_link_accent {
        @apply text-accent hover:underline transition-all duration-200 inline-flex items-center;
        position: relative;
    }

    .preview_link_accent::after {
        @apply ml-1 opacity-0 -translate-x-2 transition-all duration-200;
    }

    .preview_link_accent:hover::after {
        @apply opacity-100 translate-x-0;
    }

    /* VIP content styling */
    .content_preview_title.vip {
        color: var(--foreground);
    }

    /* Dark mode VIP styling */
    .dark .content_preview_title.vip {
        color: var(--foreground);
    }

    /* Add a subtle indicator for VIP content */
    .content_preview_title.vip::after {
        content: 'â˜…';
        display: inline-block;
        margin-left: 0.5rem;
        font-size: 0.75em;
        vertical-align: super;
        color: var(--accent);
    }

    .content_date {
        @apply mb-2 md:mb-4 w-full max-w-3xl md:max-w-5xl text-right;
        font-family: var(--font-roboto-mono);
    }

    .content_container {
        @apply max-w-4xl mx-auto px-4 py-8 md:py-12;
    }

    /* This is the styling for the content of the blog posts */
    .content_content {
        @apply mt-6 md:mt-8 mb-10 md:mb-16 w-full max-w-3xl md:max-w-4xl mx-auto;
    }

    /* Blog typography enhancements */
    .content_content h1 {
        @apply title-large;
    }

    .content_content h2 {
        @apply title-medium;
    }

    .content_content h3 {
        @apply title-small;
    }

    .content_content p {
        @apply body-medium mb-4 leading-relaxed;
    }

    .content_content ul {
        @apply unordered-list;
    }

    .content_content ol {
        @apply ordered-list;
    }

    .content_content a {
        @apply text-primary hover:underline;
    }

    .content_content img {
        @apply rounded-md shadow-md my-6 mx-auto;
    }

    .content_content blockquote {
        @apply border-l-4 border-primary pl-4 italic my-4;
    }

    .content_content pre {
        @apply bg-card rounded-md p-4 my-4 overflow-x-auto;
    }

    .content_content code {
        @apply font-mono text-accent bg-muted px-1 py-0.5 rounded;
    }

    .button {
        @apply px-4 py-2 rounded-md bg-primary text-primary-foreground hover:bg-opacity-90 transition-all duration-200 inline-flex items-center justify-center text-sm font-medium;
    }

    .button-icon {
        @apply mr-2 h-4 w-4;
    }

    .return-button {
        @apply fixed p-3 rounded-full bg-card border border-border shadow-sm hover:shadow-md transition-all duration-200 z-10 w-12 h-12 flex items-center justify-center;
        top: 4rem;
        left: 1rem;
    }

    .return-button:hover {
        @apply bg-muted transform scale-110;
    }

    @media (min-width: 768px) {
        .return-button {
            top: 6rem;
            left: 2rem;
        }
    }

    /* Add specific positioning for small screens */
    @media (max-width: 767px) {
        .return-button {
            top: 5.5rem;
            /* Move down a bit more on small screens */
        }
    }

    /* Close button styling */
    .close-button {
        @apply p-3 rounded-full bg-card border border-border shadow-sm hover:shadow-md transition-all duration-200 z-10 w-10 h-10 flex items-center justify-center;
    }

    .close-button:hover {
        @apply bg-muted transform scale-110;
    }

    /* Point form styling for experience/education sections */
    .relative.pl-6 .absolute.rounded-full {
        @apply w-2.5 h-2.5;
        top: 0.4rem;
    }

    /* End of the _content_ CSS section ------------------------------------------------------------- */
    /* ---------------------------------------------------------------------------------------------- */

    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _content_preview_ CSS section --------------------------------------------------- */

    .content_preview {
        @apply bg-card border border-border rounded-md overflow-hidden transition-all duration-300 hover:shadow-md;
        height: auto;
        display: flex;
        flex-direction: column;
    }

    /* Make the title clickable */
    .content_preview_title {
        @apply font-bold mb-1;
    }

    /* Add a hover effect for clickable titles */
    .content_preview_title:hover {
        @apply text-primary cursor-pointer;
    }

    /* Keep VIP titles using accent color on hover */
    .content_preview_title.vip:hover {
        color: var(--primary);
    }

    /* Make the entire card clickable */
    .content_preview a {
        @apply cursor-pointer;
    }

    .content_preview_inner {
        @apply flex flex-col h-full;
        flex: 1;
    }

    .content_preview_image {
        @apply relative w-full h-auto;
    }

    .content_preview_content {
        @apply p-3 flex-1 flex flex-col;
        min-height: 0;
    }

    .content_preview_footer {
        @apply flex items-center justify-between mt-auto pt-2;
    }

    .content_preview_links {
        @apply flex gap-3 items-center;
    }

    /* GitHub link styling */
    .github-link {
        @apply text-sm py-1 px-3 bg-muted rounded-full font-medium hover:bg-opacity-80 !important;
        display: inline-flex;
        align-items: center;
        color: var(--foreground);
    }

    /* Dark mode styles for GitHub button */
    .dark .github-link {
        background-color: #2d3748;
        color: #e2e8f0;
    }

    .dark .github-link:hover {
        background-color: #4a5568;
    }

    .github-link::before {
        content: '';
        display: inline-block;
        width: 16px;
        height: 16px;
        margin-right: 4px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22'%3E%3C/path%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: center;
    }

    /* Add dark mode specific styling for GitHub icon */
    .dark .github-link::before {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e2e8f0' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22'%3E%3C/path%3E%3C/svg%3E");
    }

    /* End of the _content_preview_ CSS section --------------------------------------------------- */
    /* ---------------------------------------------------------------------------------------------- */

    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _project_ CSS section ----------------------------------------------------------- */

    .project_preview_grid {
        @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 w-full mt-6 md:mt-8;
        display: grid;
        grid-auto-rows: auto;
    }

    /* End of the _project_ CSS section ------------------------------------------------------------- */
    /* ---------------------------------------------------------------------------------------------- */

    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _blog_post_ CSS section --------------------------------------------------------- */

    .blog_post_preview_container {
        @apply w-full space-y-0 mt-6 md:mt-8 grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4;
        display: grid;
        grid-auto-rows: auto;
    }

    /* End of the _blog_post_ CSS section ------------------------------------------------------------ */
    /* ----------------------------------------------------------------------------------------------- */

    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _navbar_ CSS section ------------------------------------------------------------ */

    /* Base navbar styles */
    nav {
        @apply py-3 md:py-4 border-b border-border bg-background sticky top-0 z-10 backdrop-blur-sm bg-opacity-80;
        transition: all 0.3s ease;
    }

    /* Mobile-specific navbar styles */
    @media (max-width: 767px) {
        nav {
            @apply fixed top-0 left-0 right-0 w-full;
        }
    }

    .nav-container {
        @apply container mx-auto px-4;
    }

    /* Navbar links */
    .nav-link {
        @apply text-foreground hover:text-primary transition-colors duration-200 font-mono text-sm tracking-wider py-1 px-2 -mx-2 rounded-md;
        position: relative;
    }

    .nav-link-active {
        @apply font-medium text-foreground;
        position: relative;
        display: inline-block;
    }

    .nav-link-active::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 2px;
        bottom: -2px;
        left: 0;
        background-color: var(--primary);
    }

    .nav-link-active:hover {
        color: var(--accent);
    }

    /* Hamburger menu */
    .hamburger-menu {
        @apply md:hidden flex flex-col justify-center items-center w-8 h-8 space-y-1.5 focus:outline-none;
    }

    .hamburger-line {
        @apply block w-5 h-0.5 bg-foreground transition-all duration-300;
    }

    /* Mobile dropdown */
    .mobile-dropdown {
        @apply md:hidden;
        /* Use the same cubic-bezier curve for both opening and closing */
        transition: max-height 300ms cubic-bezier(0.4, 0, 0.2, 1),
            opacity 300ms cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
    }

    /* Fixed mobile dropdown when open */
    @media (max-width: 767px) {
        .mobile-dropdown {
            @apply fixed left-0 right-0 bg-background bg-opacity-95 backdrop-blur-sm z-10;
            top: 60px;
            /* Fixed position below navbar */
        }

        /* Closed state */
        .mobile-dropdown.max-h-0 {
            max-height: 0;
            opacity: 0;
            visibility: hidden;
            /* Keep transition properties identical to open state */
            transition: max-height 300ms cubic-bezier(0.4, 0, 0.2, 1),
                opacity 300ms cubic-bezier(0.4, 0, 0.2, 1),
                visibility 0ms linear 300ms;
            /* Delay visibility change until after animation */
        }

        /* Open state */
        .mobile-dropdown.max-h-60 {
            max-height: calc(100vh - 60px);
            opacity: 1;
            visibility: visible;
            overflow-y: auto;
            /* Keep transition properties identical to closed state */
            transition: max-height 300ms cubic-bezier(0.4, 0, 0.2, 1),
                opacity 300ms cubic-bezier(0.4, 0, 0.2, 1),
                visibility 0ms linear;
            /* No delay for visibility when opening */
        }

        .mobile-dropdown-content {
            @apply flex flex-col space-y-3 py-3 mt-2 border-t border-border;
            /* Prevent layout shifts during animation */
            transform: translateZ(0);
            will-change: opacity, transform;
        }
    }

    .mobile-dropdown-content>div {
        @apply mb-2 px-2;
    }

    /* Mobile-specific styles */
    @media (max-width: 767px) {
        .nav-link-active {
            @apply font-bold;
            display: inline-block;
        }

        .nav-link {
            @apply px-3 py-2 mx-0;
            display: inline-block;
        }

        /* Mobile dropdown menu styles */
        .mobile-dropdown-content .nav-link-active {
            @apply font-bold;
            display: inline-block;
            /* Add padding below the text to create space between text and underline */
            padding-bottom: 4px;
            /* Ensure the underline stays with the text */
            position: relative;
            margin-bottom: 4px;
        }

        .mobile-dropdown-content .nav-link-active::after {
            /* Position the underline relative to the text */
            content: '';
            position: absolute;
            width: 90%;
            height: 2px;
            bottom: 0;
            left: 5%;
            background-color: var(--primary);
            /* Add transition for smooth movement */
            transition: transform 0.3s ease;
            transform-origin: center;
            border-radius: 2px;
        }

        /* Add hover effect to make it more interactive */
        .mobile-dropdown-content .nav-link-active:hover::after {
            transform: scaleX(1.05);
            background-color: var(--accent);
        }

        /* Add padding to the body to prevent content from being hidden under fixed navbar */
        body {
            @apply pt-14;
        }
    }

    /* Desktop-specific styles */
    @media (min-width: 768px) {
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 1px;
            bottom: -2px;
            left: 0;
            background-color: var(--primary);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-link {
            @apply bg-transparent px-0 mx-0;
            display: inline-block;
        }

        .nav-link-active {
            @apply bg-transparent font-bold;
            display: inline-block;
        }

        .nav-link-active::after {
            height: 2px;
        }

        .nav-link-active:hover {
            color: var(--accent);
        }
    }

    /* End of the _navbar_ CSS section -------------------------------------------------------------- */
    /* ---------------------------------------------------------------------------------------------- */

    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _footer_ CSS section ------------------------------------------------------------ */

    /* Base footer styles */
    footer {
        @apply py-4 md:py-6 border-t border-border bg-background;
    }

    .footer-container {
        @apply container mx-auto px-4 flex flex-col md:flex-row justify-between items-center text-sm text-muted-foreground gap-3 md:gap-0;
    }

    /* Footer social links */
    .footer-social-links {
        @apply flex space-x-4 mt-3 md:mt-0;
    }

    .footer-social-icon {
        @apply text-muted-foreground hover:text-primary transition-colors duration-200;
    }

    .footer-icon {
        @apply h-5 w-5;
    }

    /* Mobile-specific footer styles */
    @media (max-width: 768px) {
        .footer-container {
            @apply flex-row justify-between items-center text-center space-y-0;
        }

        .footer-social-links {
            @apply justify-end mt-0;
        }
    }

    /* End of the _footer_ CSS section -------------------------------------------------------------- */
    /* ---------------------------------------------------------------------------------------------- */

    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _masonry_grid_ CSS section ------------------------------------------------------- */

    .masonry-grid {
        @apply flex w-full -ml-4;
    }

    .masonry-grid-column {
        @apply pl-4 bg-clip-padding;
    }

    /* End of the _masonry_grid_ CSS section --------------------------------------------------------- */
    /* ---------------------------------------------------------------------------------------------- */

    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _cursor_ CSS section ------------------------------------------------------------ */

    .blink-cursor {
        @apply text-primary ml-1;
        animation: blink 1s step-end infinite;
    }

    @keyframes blink {

        0%,
        100% {
            opacity: 1;
        }

        50% {
            opacity: 0;
        }
    }

    /* End of the _cursor_ CSS section -------------------------------------------------------------- */
    /* ---------------------------------------------------------------------------------------------- */

    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _katex_ CSS section ------------------------------------------------------------ */

    .katex-display {
        @apply overflow-x-auto overflow-y-hidden my-4;
    }

    .katex-display>.katex {
        @apply text-foreground;
    }

    /* Add support for line breaks in math equations */
    .katex-display>.katex>.katex-html {
        white-space: normal !important;
        max-width: 100%;
        display: inline-block;
    }

    /* Ensure equations can break at operators */
    .katex-display>.katex>.katex-html>.base {
        margin: 0.25em 0;
        word-break: break-word;
        word-wrap: break-word;
        white-space: normal !important;
    }

    /* End of the _katex_ CSS section -------------------------------------------------------------- */
    /* ---------------------------------------------------------------------------------------------- */

    /* ---------------------------------------------------------------------------------------------- */
    /* Start of the _gallery_ CSS section ------------------------------------------------------------ */

    /* Gallery image styles */
    .gallery-image-container {
        @apply relative overflow-hidden rounded-md;
        transition: transform 0.3s ease;
    }

    .gallery-image-container:hover {
        transform: scale(1.02);
    }

    /* End of the _gallery_ CSS section -------------------------------------------------------------- */
    /* ---------------------------------------------------------------------------------------------- */
}

/* Mobile-first improvements */
@media (max-width: 768px) {
    h1 {
        @apply text-2xl;
    }

    h2 {
        @apply text-xl;
    }

    .content_container {
        @apply px-4 py-6;
    }

    .content_preview {
        @apply shadow-sm;
    }

    /* Remove the grid styles for project and blog containers since we're using masonry */
    .masonry-grid {
        @apply -ml-2;
    }

    .masonry-grid-column {
        @apply pl-2;
    }
}

/* ---------------------------------------------------------------------------------------------- */
/* Start of the _utilities_ CSS section --------------------------------------------------------- */

/* Hide scrollbar for various elements */
.hide-scrollbar {
    -ms-overflow-style: none;
    /* IE and Edge */
    scrollbar-width: none;
    /* Firefox */
}

.hide-scrollbar::-webkit-scrollbar {
    display: none;
    /* Chrome, Safari and Opera */
}

/* Scrollbar styling */
::-webkit-scrollbar {
    @apply w-2 h-2;
}

::-webkit-scrollbar-track {
    @apply bg-muted;
}

::-webkit-scrollbar-thumb {
    @apply bg-muted-foreground bg-opacity-50 rounded-full hover:bg-opacity-70 transition-all duration-200;
}

/* End of the _utilities_ CSS section ----------------------------------------------------------- */
/* ---------------------------------------------------------------------------------------------- */